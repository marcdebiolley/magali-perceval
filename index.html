<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Magali & Perceval — 11.09.2026</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="./design.css?v=20260220" />
  </head>
  <body>
    <script src="./access.js"></script>

    <nav data-audience="member">
      <div class="nav-inner">
        <a class="nav-brand" href="#top">Magali<span>&</span>Perceval</a>
        <button class="hamburger" onclick="document.querySelector('.nav-links').classList.toggle('open')" aria-label="Menu">
          <span></span><span></span><span></span>
        </button>
        <ul class="nav-links">
          <li><a href="#festivites">Les festivités</a></li>
          <li><a href="#transport">Transport & logement</a></li>
          <li><a href="#region">Région</a></li>
          <li><a href="#rsvp">RSVP</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </div>
    </nav>

    <section class="hero" id="top" data-after-gate>
      <div class="hero-date">11 septembre 2026<br />Crillon-le-Brave</div>
      <h1 class="hero-names">
        Magali
        <span class="ampersand">&</span>
        Perceval
      </h1>

      <div class="hero-access" data-audience="locked" data-gate>
        <p class="hero-location">Provence, France</p>
        <div class="gate-wrap">
          <form class="gate-form" data-gate-form>
            <div class="gate-row">
              <input class="gate-input" id="code" name="code" type="password" inputmode="text" autocomplete="one-time-code" placeholder="Code d’accès" data-gate-input />
              <button class="gate-button" type="submit">Entrer</button>
            </div>
            <div class="gate-meta">
              <div class="gate-error" role="status" aria-live="polite" data-gate-error></div>
              <a href="#" class="gate-reset" data-gate-reset>Effacer</a>
            </div>
          </form>
        </div>
      </div>

      <p class="hero-location" data-audience="member">Provence, France</p>
      <div class="hero-scroll" data-audience="member"><span></span></div>
    </section>

    <div class="divider" data-audience="member"><div class="divider-line"></div></div>

    <section id="festivites" data-audience="member">
      <div class="reveal">
        <div class="section-label">Programme</div>
        <h2 class="section-title">Les festivités</h2>
        <p class="section-intro">Toutes les informations pour le Jour J, et les moments "jeunes & fratrie" si concernés.</p>
      </div>

      <div class="event-card reveal" data-audience="young">
        <div class="card-header">
          <span class="card-day">Jeudi — Accueil</span>
          <span class="card-badge">Jeunes & fratrie</span>
        </div>
        <div class="card-body">
          <p>Nous accueillons ceux qui seront déjà dans la région pour le mariage à partir de 16h dans la maison des parents de Perceval, à Crillon-le-Brave, pour une aprem relax au bord de la piscine, pizza et cocktail.</p>
          <p><strong>Mot d'ordre :</strong> faites au mieux pour vous.</p>
          <div class="ceremony-illus ceremony-illus--large ceremony-illus--center" aria-hidden="true">
            <img src="./images/jeudi%20welcome.png" alt="" loading="lazy" />
          </div>
          <div class="info-grid">
            <span class="info-label">Adresse</span>
            <span class="info-value"><a href="https://www.google.com/maps/search/?api=1&query=219%2C%20Chemin%20de%20la%20Croix%20du%20Coq%2C%2084410%20Crillon-le-Brave" target="_blank" rel="noopener noreferrer">219, Chemin de la Croix du Coq, 84410 Crillon-le-Brave</a></span>
            <span class="info-label">Horaire</span>
            <span class="info-value">16h – 22h</span>
            <span class="info-label">Dress code</span>
            <span class="info-value">Pas de dress code. Maillots + tenue d'été. Birkenstock et sandales encouragées.</span>
          </div>
        </div>
      </div>

      <div class="event-card reveal">
        <div class="card-header">
          <span class="card-day">Vendredi — Jour J</span>
          <span class="card-badge">11 septembre 2026</span>
        </div>
        <div class="card-body">
          <div class="ceremony-head">
            <div class="card-subtitle">Partie 1 — Église</div>
            <div class="ceremony-illus" aria-hidden="true">
              <img src="./images/eglise%20m%26p.png" alt="" loading="lazy" />
            </div>
          </div>
          <div class="info-grid">
            <span class="info-label">Heure</span>
            <span class="info-value">14h30</span>
            <span class="info-label">Adresse</span>
            <span class="info-value"><a href="https://www.google.com/maps/search/?api=1&query=18%2C%20Rue%20Escalado%2C%2084410%20Crillon-le-Brave" target="_blank" rel="noopener noreferrer">18, Rue Escalado, 84410 Crillon-le-Brave</a></span>
            <span class="info-label">Parking</span>
            <span class="info-value">Parking de l'église ou "Rue du Capitaine Crillon"</span>
          </div>

          <div class="ceremony-head">
            <div class="card-subtitle">Partie 2 — Domaine des Pins</div>
            <div class="ceremony-illus" aria-hidden="true">
              <img src="./images/domaine%20de%20pins%20.png" alt="" loading="lazy" />
            </div>
          </div>
          <div class="info-grid">
            <span class="info-label">Réception</span>
            <span class="info-value">16h30</span>
            <span class="info-label">Dîner</span>
            <span class="info-value">19h</span>
            <span class="info-label">Soirée</span>
            <span class="info-value">22h – 3h</span>
            <span class="info-label">Adresse</span>
            <span class="info-value"><a href="https://www.google.com/maps/search/?api=1&query=1100%20Chem.%20Mormoiron%20par%20les%20Mourands%2C%2084410%20Crillon-le-Brave%2C%20France" target="_blank" rel="noopener noreferrer">Domaine des Pins — 1100 Chem. Mormoiron par les Mourands, 84410 Crillon-le-Brave, France</a></span>
            <span class="info-label">Déplacement</span>
            <span class="info-value">Parking à côté du domaine (indiqué à l'arrivée). Marche possible depuis l'église (20–25 min).</span>
            <span class="info-label">Dress code</span>
            <span class="info-value">Tenue de ville</span>
          </div>
        </div>
      </div>

      <div class="event-card reveal" data-audience="young">
        <div class="card-header">
          <span class="card-day">Samedi — Brunch festif</span>
          <span class="card-badge">Jeunes & fratrie</span>
        </div>
        <div class="card-body">
          <div class="ceremony-head">
            <div class="card-subtitle">Brunch</div>
            <div class="ceremony-illus" aria-hidden="true">
              <img src="./images/brunch.png" alt="" loading="lazy" />
            </div>
          </div>
          <div class="info-grid">
            <span class="info-label">Horaire</span>
            <span class="info-value">13h – 22h</span>
            <span class="info-label">Adresse</span>
            <span class="info-value"><a href="https://www.google.com/maps/search/?api=1&query=1100%20Chem.%20Mormoiron%20par%20les%20Mourands%2C%2084410%20Crillon-le-Brave%2C%20France" target="_blank" rel="noopener noreferrer">Domaine des Pins — 1100 Chem. Mormoiron par les Mourands, 84410 Crillon-le-Brave, France</a></span>
            <span class="info-label">Dress code</span>
            <span class="info-value">À compléter</span>
          </div>
        </div>
      </div>
    </section>

    <div class="divider" data-audience="member"><div class="divider-line"></div></div>

    <section id="transport" data-audience="member">
      <div class="reveal">
        <div class="section-label">Pratique</div>
        <h2 class="section-title">Transport & logement</h2>
        <p class="section-intro">Comment venir, se déplacer, et où dormir autour de Crillon-le-Brave.</p>
      </div>

      <div class="transport-block reveal">
        <h3>Venir à Crillon-le-Brave</h3>

        <div class="transport-method">
          <div class="transport-head">
            <h4>En train</h4>
            <div class="transport-illus" aria-hidden="true">
              <img src="./images/tgv.png" alt="" loading="lazy" />
            </div>
          </div>
          <p>Gare la plus proche : Avignon (≈ 35 minutes en voiture du village).</p>
          <p>Depuis Bruxelles-Midi : 3 trains directs (matin, vers 13h, fin de journée) ≈ 5h. Il existe aussi de nombreux trains avec une escale à Paris, souvent moins chers.</p>
          <p>Attention : certains billets ne sont disponibles qu'à partir de X mois avant le trajet. Mets une alerte et réserve dès que possible.</p>
          <p>Petit conseil : carte réduction à 49€.</p>
        </div>

        <div class="transport-method">
          <div class="transport-head">
            <h4>En voiture</h4>
            <div class="transport-illus" aria-hidden="true">
              <img src="./images/voiture.png" alt="" loading="lazy" />
            </div>
          </div>
          <p>Trajet classique vers le Sud ≈ 9h. Escale conseillée à Beaune si en deux jours. Covoiturage encouragé.</p>
        </div>
      </div>

      <div class="transport-block reveal">
        <h3>Se déplacer</h3>

        <div class="transport-method">
          <h4>Taxi</h4>
          <p>Contacts taxi : à ajouter. On les repartagera avant le mariage pour éviter que quiconque reprenne sa voiture sous alcool.</p>
        </div>

        <div class="transport-method">
          <h4>Voiture de location</h4>
          <p>Louer une voiture depuis la gare d'Avignon peut être pratique.</p>
        </div>

        <div class="transport-method">
          <h4>Vélo / à pied</h4>
          <p>Super option pour profiter de l'ambiance locale.</p>
        </div>
      </div>

      <div class="transport-block reveal">
        <h3>Où dormir ?</h3>
        <div class="lodging-grid">
          <div class="lodging-item"><strong>Crillon-le-Brave</strong><span>Idéal pour être sur place.</span></div>
          <div class="lodging-item"><strong>Bédoin</strong><span>≈ 10 min en voiture. Plus grand, souvent plus de logements.</span></div>
          <div class="lodging-item"><strong>Caromb / St-Pierre-de-Vassols</strong><span>≈ 12 minutes en voiture.</span></div>
          <div class="lodging-item"><strong>Modène</strong><span>≈ 20 minutes en voiture.</span></div>
        </div>
      </div>

      <div class="tip-box reveal">
        <p>Si vous avez des questions ou besoin d'aide pour les transports, <a href="#contact">contactez-nous</a>.</p>
      </div>
    </section>

    <div class="divider" data-audience="member"><div class="divider-line"></div></div>

    <section id="region" data-audience="member">
      <div class="reveal">
        <div class="section-label">Explorer</div>
        <h2 class="section-title">À faire dans la région</h2>
        <p class="section-intro">Quelques idées pour profiter du Ventoux et des environs.</p>
      </div>

      <div class="activity-grid reveal">
        <div class="activity-card">
          <div class="activity-head">
            <h4>Mont Ventoux</h4>
            <div class="activity-illus" aria-hidden="true">
              <img src="./images/mont%20ventoux%20bb.png" alt="" loading="lazy" />
            </div>
          </div>
          <p>Vous pouvez le grimper à pied ou profiter d'une sortie vélo. Bédoin est un point de départ phare. Location vélo conseillée : à compléter (réserver en avance).</p>
        </div>
        <div class="activity-card">
          <h4>Balades & villages</h4>
          <p>Gordes, Suzette, Le Baroux... (à compléter). Balades autour du village (voir carte).</p>
        </div>
        <div class="activity-card">
          <h4>Dégustation de vin</h4>
          <p>La Ferme Saint Pierre, Valcombe... (appeler pour réserver).</p>
        </div>
        <div class="activity-card">
          <h4>Manger / marchés</h4>
          <p>Restaurants : Le Saint Romain, Clovis & Basina, Le Six à table, Lily & Paul. Marchés : Bédoin (lundi matin), Pernes (samedi matin), Isle-sur-la-Sorgue (dimanche matin).</p>
        </div>
      </div>
    </section>

    <div class="divider" data-audience="member"><div class="divider-line"></div></div>

    <section id="rsvp" data-audience="member">
      <div class="reveal">
        <div class="section-label">Confirmer</div>
        <h2 class="section-title">RSVP</h2>
        <p class="section-intro">Merci de confirmer votre présence avant le 1er juin 2026.</p>
      </div>

      <div class="rsvp-card reveal">
        <form id="rsvp-form" onsubmit="handleRSVP(event)">
          <div class="form-row">
            <div class="form-group">
              <label for="prenom">Prénom</label>
              <input type="text" id="prenom" name="prenom" required placeholder="Votre prénom" />
            </div>
            <div class="form-group">
              <label for="nom">Nom</label>
              <input type="text" id="nom" name="nom" required placeholder="Votre nom" />
            </div>
          </div>

          <div class="form-group">
            <label for="email">Email</label>
            <input type="email" id="email" name="email" required placeholder="votre@email.com" />
          </div>

          <div class="form-group">
            <label class="label-block">Serez-vous présent(e) ?</label>
            <div class="radio-group">
              <label class="radio-card">
                <input type="radio" name="presence" value="oui" required />
                <span class="radio-label">
                  <span class="radio-icon">✓</span>
                  Avec joie
                </span>
              </label>
              <label class="radio-card">
                <input type="radio" name="presence" value="non" />
                <span class="radio-label">
                  <span class="radio-icon">✕</span>
                  Malheureusement non
                </span>
              </label>
            </div>
          </div>

          <div class="form-group" id="guests-group">
            <label for="guests">Nombre de personnes (vous inclus)</label>
            <div class="stepper">
              <button type="button" class="stepper-btn" onclick="updateGuests(-1)">−</button>
              <input type="number" id="guests" name="guests" value="1" min="1" max="10" readonly />
              <button type="button" class="stepper-btn" onclick="updateGuests(1)">+</button>
            </div>
            <div id="guest-names"></div>
          </div>

          <div class="form-group" id="events-group" data-audience="young">
            <label class="label-block">À quels moments serez-vous présent(e) ?</label>
            <div class="checkbox-group">
              <label class="checkbox-card">
                <input type="checkbox" name="events" value="jeudi" />
                <span class="checkbox-label">
                  <span class="checkbox-day">Jeudi</span>
                  <span class="checkbox-desc">Accueil piscine & pizza</span>
                </span>
              </label>
              <label class="checkbox-card">
                <input type="checkbox" name="events" value="vendredi" checked />
                <span class="checkbox-label">
                  <span class="checkbox-day">Vendredi</span>
                  <span class="checkbox-desc">Cérémonie & soirée</span>
                </span>
              </label>
              <label class="checkbox-card">
                <input type="checkbox" name="events" value="samedi" />
                <span class="checkbox-label">
                  <span class="checkbox-day">Samedi</span>
                  <span class="checkbox-desc">Brunch festif</span>
                </span>
              </label>
            </div>
          </div>

          <div class="form-group" id="allergies-group">
            <label for="allergies">Allergies ou régime alimentaire</label>
            <input type="text" id="allergies" name="allergies" placeholder="Végétarien, sans gluten, etc." />
          </div>

          <div class="form-group">
            <label for="message">Un petit mot ? <span class="label-optional">(optionnel)</span></label>
            <textarea id="message" name="message" rows="3" placeholder="On a hâte de vous lire..."></textarea>
          </div>

          <button type="submit" class="btn-submit" id="btn-submit">
            <span class="btn-text">Envoyer ma réponse</span>
            <span class="btn-loader" style="display:none;">
              <span class="dot"></span><span class="dot"></span><span class="dot"></span>
            </span>
          </button>
        </form>

        <div id="rsvp-success" style="display:none;">
          <div class="success-icon">♥</div>
          <h3 class="success-title">Merci !</h3>
          <p class="success-text">Votre réponse a bien été enregistrée.<br />On a hâte de vous retrouver en Provence.</p>
        </div>
      </div>
    </section>

    <!-- FOOTER -->
    <footer id="contact" data-audience="all">
      <div class="footer-ornament">
        <span></span>
        <div class="diamond"></div>
        <span></span>
      </div>
      <p class="footer-heading">Contact</p>
      <div class="footer-contacts">
        <a href="tel:+32479947943">Magali : +32 479 94 79 43</a>
        <a href="tel:+32490649129">Perceval : +32 490 64 91 29</a>
        <span>Domicile : Rue Wéry 25 1050 Ixelles</span>
      </div>
      <p class="footer-credit">Designed by <a href="https://marcodb.be" target="_blank" rel="noopener">marcodb</a></p>
      <a href="#" class="footer-gift">Liste cadeau</a>
      <p class="footer-switch" data-audience="member"><a href="#" data-clear-access>Changer de code</a></p>
    </footer>

    <script>
      window.MPAccess.mountGate();
      window.MPAccess.mountSwitchLinks();
      window.MPAccess.applyAudience();

      // ─── RSVP FORM LOGIC ───
      const presenceRadios = document.querySelectorAll('input[name="presence"]');
      const guestsGroup = document.getElementById('guests-group');
      const eventsGroup = document.getElementById('events-group');
      const allergiesGroup = document.getElementById('allergies-group');

      function setGroupDisplay(el, shouldShow) {
        if (!el) return;
        if (el.hidden) return;
        el.style.display = shouldShow ? 'block' : 'none';
      }

      presenceRadios.forEach((radio) => {
        radio.addEventListener('change', () => {
          const coming = radio.value === 'oui';
          setGroupDisplay(guestsGroup, coming);
          setGroupDisplay(eventsGroup, coming);
          setGroupDisplay(allergiesGroup, coming);
        });
      });

      function updateGuests(delta) {
        const input = document.getElementById('guests');
        if (!input) return;
        let val = parseInt(input.value) + delta;
        val = Math.max(1, Math.min(10, val));
        input.value = val;
        renderGuestNames(val);
      }

      function renderGuestNames(count) {
        const container = document.getElementById('guest-names');
        if (!container) return;
        const existing = {};
        container.querySelectorAll('.guest-name-row').forEach((row) => {
          const idx = row.dataset.index;
          const inputs = row.querySelectorAll('input');
          existing[idx] = { prenom: inputs[0].value, nom: inputs[1].value };
        });

        container.innerHTML = '';

        for (let i = 2; i <= count; i++) {
          const row = document.createElement('div');
          row.className = 'guest-name-row';
          row.dataset.index = i;
          row.style.animationDelay = (i - 2) * 0.05 + 's';
          const prev = existing[i] || { prenom: '', nom: '' };
          row.innerHTML = `
      <span class="guest-number">${i}</span>
      <input type="text" name="guest_prenom_${i}" placeholder="Prénom" value="${prev.prenom}" required>
      <input type="text" name="guest_nom_${i}" placeholder="Nom" value="${prev.nom}" required>
    `;
          container.appendChild(row);
        }
      }

      function handleRSVP(e) {
        e.preventDefault();
        const btn = document.getElementById('btn-submit');
        const btnText = btn ? btn.querySelector('.btn-text') : null;
        const btnLoader = btn ? btn.querySelector('.btn-loader') : null;

        if (btnText) btnText.style.display = 'none';
        if (btnLoader) btnLoader.style.display = 'inline-flex';
        if (btn) btn.disabled = true;

        // Simulation (à remplacer) :
        setTimeout(() => {
          const form = document.getElementById('rsvp-form');
          const success = document.getElementById('rsvp-success');
          if (form) form.style.display = 'none';
          if (success) success.style.display = 'block';
        }, 1500);
      }

      window.updateGuests = updateGuests;
      window.handleRSVP = handleRSVP;

      const selectedPresence = document.querySelector('input[name="presence"]:checked');
      const coming = selectedPresence ? selectedPresence.value === 'oui' : true;
      setGroupDisplay(guestsGroup, coming);
      setGroupDisplay(eventsGroup, coming);
      setGroupDisplay(allergiesGroup, coming);
      renderGuestNames(Number(document.getElementById('guests')?.value || 1));

      const reveals = document.querySelectorAll('.reveal');
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add('visible');
            }
          });
        },
        { threshold: 0.12 }
      );

      reveals.forEach((el) => observer.observe(el));
    </script>
  </body>
</html>
